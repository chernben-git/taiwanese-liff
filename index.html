<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å’±å…œçš„å°èª</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: sans-serif; background: #f0f4f0; }

    .header {
      background: linear-gradient(135deg, #06C755, #04a044);
      color: white;
      padding: 24px 20px 20px;
      text-align: center;
    }
    .header h1 { font-size: 22px; font-weight: bold; }
    .header p { font-size: 13px; margin-top: 4px; opacity: 0.85; }

    .user-bar {
      background: white;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid #eee;
    }
    .user-bar img {
      width: 40px; height: 40px;
      border-radius: 50%;
      border: 2px solid #06C755;
    }
    .user-bar span { font-size: 15px; font-weight: bold; color: #333; }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      padding: 18px;
    }

    .btn {
      background: white;
      border: none;
      border-radius: 16px;
      padding: 22px 12px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      transition: transform 0.1s;
    }
    .btn:active { transform: scale(0.96); }
    .btn .icon { font-size: 38px; }
    .btn .label {
      font-size: 15px;
      font-weight: bold;
      color: #333;
    }
    .btn .desc {
      font-size: 11px;
      color: #999;
    }

    .btn.admin { display: none; }
    .btn.admin.show { display: flex; }

    .loading {
      text-align: center;
      padding: 60px 20px;
      color: #888;
      font-size: 15px;
    }
  </style>
</head>
<body>

<div id="app" style="display:none">
  <div class="header">
    <h1>ğŸ“š å’±å…œçš„å°èª</h1>
    <p>LÃ¡n-tau Ãª TÃ¢i-gÃ­</p>
  </div>

  <div class="user-bar">
    <img id="userImg" src="" alt="é ­åƒ">
    <span id="userName">è¼‰å…¥ä¸­...</span>
  </div>

  <div class="grid">
    <a class="btn" href="daily.html">
      <span class="icon">ğŸ“–</span>
      <span class="label">ä»Šæ—¥å°èª</span>
      <span class="desc">æ¯æ—¥ä¸€è©</span>
    </a>
    <a class="btn" href="videos.html">
      <span class="icon">ğŸ¬</span>
      <span class="label">å½±ç‰‡æ•™å­¸</span>
      <span class="desc">æ•™å­¸å½±ç‰‡åº«</span>
    </a>
    <a class="btn" href="seminar.html">
      <span class="icon">ğŸ“»</span>
      <span class="label">ç·šä¸Šç ”è¨</span>
      <span class="desc">æ´»å‹•èˆ‡ç›´æ’­</span>
    </a>
    <a class="btn" href="homework.html">
      <span class="icon">ğŸ“</span>
      <span class="label">å­¸ç¿’ä½œæ¥­</span>
      <span class="desc">å›å ±èˆ‡ç·´ç¿’</span>
    </a>
    <a class="btn" href="progress.html">
      <span class="icon">ğŸ“Š</span>
      <span class="label">æˆ‘çš„é€²åº¦</span>
      <span class="desc">å­¸ç¿’ç´€éŒ„</span>
    </a>
    <a class="btn admin" id="adminBtn" href="admin.html">
      <span class="icon">âš™ï¸</span>
      <span class="label">ç®¡ç†å¾Œå°</span>
      <span class="desc">é™ç®¡ç†å“¡</span>
    </a>
  </div>
</div>

<div class="loading" id="loading">è¼‰å…¥ä¸­ï¼Œè«‹ç¨å€™...</div>

<script>
  const LIFF_ID = "2009173020-tAsCXSP4";

  const ADMIN_IDS = [
    "uc5ca09cd5c8a92cf82baa77a923536e3"
  ];

  liff.init({ liffId: LIFF_ID })
    .then(async () => {
      if (!liff.isLoggedIn()) {
        liff.login();
        return;
      }

      const profile = await liff.getProfile();

      document.getElementById("userImg").src = profile.pictureUrl;
      document.getElementById("userName").textContent =
        "ä½ å¥½ï¼Œ" + profile.displayName;

      if (ADMIN_IDS.includes(profile.userId)) {
        document.getElementById("adminBtn").classList.add("show");
      }

      sessionStorage.setItem("userId", profile.userId);
      sessionStorage.setItem("userName", profile.displayName);

      document.getElementById("loading").style.display = "none";
      document.getElementById("app").style.display = "block";
    })
    .catch(err => {
      document.getElementById("loading").textContent =
        "è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†ã€‚éŒ¯èª¤ï¼š" + err.message;
    });
</script>
</body>
</html>